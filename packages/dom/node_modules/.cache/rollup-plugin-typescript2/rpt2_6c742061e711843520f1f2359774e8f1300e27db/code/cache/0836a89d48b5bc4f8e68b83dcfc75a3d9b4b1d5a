{"code":"import { Maybe } from \"typescript-monads\";\r\nexport class AtomTrackingContext {\r\n    scopeStack = [[]];\r\n    getCurrentScope() {\r\n        return this.scopeStack[this.scopeStack.length - 1];\r\n    }\r\n    getCurrentParent() {\r\n        const currentScope = this.getCurrentScope();\r\n        if (currentScope.length === 0) {\r\n            return Maybe.none();\r\n        }\r\n        return Maybe.some(currentScope[currentScope.length - 1]);\r\n    }\r\n    pushParent(derivation) {\r\n        this.getCurrentScope().push(derivation);\r\n    }\r\n    popParent() {\r\n        this.getCurrentScope().pop();\r\n    }\r\n    enterNewTrackingContext() {\r\n        this.scopeStack.push([]);\r\n    }\r\n    exitCurrentTrackingContext() {\r\n        if (this.scopeStack.length === 1) {\r\n            // TODO(ericr): more clear message and type\r\n            throw new Error(\"unable to exit the base context\");\r\n        }\r\n        this.scopeStack.pop();\r\n    }\r\n}\r\n//# sourceMappingURL=context.js.map","references":["/Users/eric.rodriguez/personal/dev/recoil/node_modules/typescript-monads/index.d.ts"],"map":"{\"version\":3,\"file\":\"context.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../atom/lib/context.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,KAAK,EAAU,MAAM,mBAAmB,CAAC;AAOlD,MAAM,OAAO,mBAAmB;IACb,UAAU,GAAmB,CAAC,EAAE,CAAC,CAAC;IAE3C,eAAe;QACrB,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACrD,CAAC;IAEM,gBAAgB;QACrB,MAAM,YAAY,GAAiB,IAAI,CAAC,eAAe,EAAE,CAAC;QAE1D,IAAI,YAAY,CAAC,MAAM,KAAK,CAAC,EAAE;YAC7B,OAAO,KAAK,CAAC,IAAI,EAAc,CAAC;SACjC;QAED,OAAO,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;IAC3D,CAAC;IAEM,UAAU,CAAC,UAAsB;QACtC,IAAI,CAAC,eAAe,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC1C,CAAC;IAEM,SAAS;QACd,IAAI,CAAC,eAAe,EAAE,CAAC,GAAG,EAAE,CAAC;IAC/B,CAAC;IAEM,uBAAuB;QAC5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC3B,CAAC;IAEM,0BAA0B;QAC/B,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;YAChC,2CAA2C;YAC3C,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;SACpD;QACD,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;IACxB,CAAC;CACF\"}","dtsmap":{"name":"/Users/eric.rodriguez/personal/dev/recoil/packages/dom/node_modules/.cache/rollup-plugin-typescript2/placeholder/atom/lib/context.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"context.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../atom/lib/context.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAS,MAAM,EAAE,MAAM,mBAAmB,CAAC;AAElD,oBAAY,UAAU,GAAG;IACvB,UAAU,IAAI,IAAI,CAAC;IACnB,UAAU,IAAI,IAAI,CAAC;CACpB,CAAC;AAEF,qBAAa,mBAAmB;IAC9B,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAwB;IAEnD,OAAO,CAAC,eAAe;IAIhB,gBAAgB,IAAI,MAAM,CAAC,UAAU,CAAC;IAUtC,UAAU,CAAC,UAAU,EAAE,UAAU,GAAG,IAAI;IAIxC,SAAS,IAAI,IAAI;IAIjB,uBAAuB,IAAI,IAAI;IAI/B,0BAA0B,IAAI,IAAI;CAO1C\"}"},"dts":{"name":"/Users/eric.rodriguez/personal/dev/recoil/packages/dom/node_modules/.cache/rollup-plugin-typescript2/placeholder/atom/lib/context.d.ts","writeByteOrderMark":false,"text":"import { IMaybe } from \"typescript-monads\";\r\nexport declare type ParentAtom = {\r\n    childDirty(): void;\r\n    childReady(): void;\r\n};\r\nexport declare class AtomTrackingContext {\r\n    private readonly scopeStack;\r\n    private getCurrentScope;\r\n    getCurrentParent(): IMaybe<ParentAtom>;\r\n    pushParent(derivation: ParentAtom): void;\r\n    popParent(): void;\r\n    enterNewTrackingContext(): void;\r\n    exitCurrentTrackingContext(): void;\r\n}\r\n//# sourceMappingURL=context.d.ts.map"}}
