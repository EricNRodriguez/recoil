{"code":"import { WElement } from \"./element\";\r\nimport { isAtom, runEffect } from \"atom\";\r\nimport { WNode } from \"./node\";\r\nimport { GlobalEventCoordinator } from \"./event\";\r\nconst globalEventCoordinator = new GlobalEventCoordinator();\r\nexport const createElement = (tag, props, children) => {\r\n    const node = new WElement(tag instanceof HTMLElement ? tag : document.createElement(tag), globalEventCoordinator);\r\n    node.setChildren(children);\r\n    Object.entries(props).forEach(([key, val]) => {\r\n        node.setProperty(key, val);\r\n        if (isAtom(val)) {\r\n            const ref = runEffect(() => node.setProperty(key, val.get()));\r\n            node.registerOnMountHook(() => ref.activate());\r\n            node.registerOnUnmountHook(() => ref.deactivate());\r\n        }\r\n        else {\r\n            node.setProperty(key, val);\r\n        }\r\n    });\r\n    return node;\r\n};\r\nexport const createTextNode = (text) => {\r\n    const node = new WNode(document.createTextNode(\"\"));\r\n    if (isAtom(text)) {\r\n        const ref = runEffect(() => node.setProperty(\"textContent\", text.get()));\r\n        node.registerOnMountHook(ref.activate.bind(ref));\r\n        node.registerOnUnmountHook(ref.deactivate.bind(ref));\r\n    }\r\n    else {\r\n        node.setProperty(\"textContent\", text);\r\n    }\r\n    return node;\r\n};\r\nexport const createFragment = (children) => {\r\n    return new WNode(document.createDocumentFragment()).setChildren(children);\r\n};\r\n//# sourceMappingURL=factory.js.map","references":["/Users/eric.rodriguez/personal/dev/recoil/packages/dom/lib/element.ts","/Users/eric.rodriguez/personal/dev/recoil/packages/atom/lib/index.ts","/Users/eric.rodriguez/personal/dev/recoil/packages/dom/lib/node.ts","/Users/eric.rodriguez/personal/dev/recoil/packages/dom/lib/event.ts"],"map":"{\"version\":3,\"file\":\"factory.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../dom/lib/factory.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,WAAW,CAAC;AACrC,OAAO,EAAS,MAAM,EAAkB,SAAS,EAAE,MAAM,MAAM,CAAC;AAChE,OAAO,EAAE,KAAK,EAAE,MAAM,QAAQ,CAAC;AAC/B,OAAO,EAAE,sBAAsB,EAAE,MAAM,SAAS,CAAC;AAMjD,MAAM,sBAAsB,GAC1B,IAAI,sBAAsB,EAAE,CAAC;AAE/B,MAAM,CAAC,MAAM,aAAa,GAAG,CAC3B,GAAiC,EACjC,KAAY,EACZ,QAAkB,EACkB,EAAE;IACtC,MAAM,IAAI,GAAG,IAAI,QAAQ,CACvB,GAAG,YAAY,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,EAC9D,sBAAsB,CACvB,CAAC;IAEF,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IAE3B,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,EAAE;QAC3C,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAC3B,IAAI,MAAM,CAAC,GAAG,CAAC,EAAE;YACf,MAAM,GAAG,GAAmB,SAAS,CAAC,GAAG,EAAE,CACzC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC,CACjC,CAAC;YACF,IAAI,CAAC,mBAAmB,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;YAC/C,IAAI,CAAC,qBAAqB,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC;SACpD;aAAM;YACL,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;SAC5B;IACH,CAAC,CAAC,CAAC;IAEH,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,cAAc,GAAG,CAAC,IAAyB,EAAe,EAAE;IACvE,MAAM,IAAI,GAAG,IAAI,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;IAEpD,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE;QAChB,MAAM,GAAG,GAAmB,SAAS,CAAC,GAAG,EAAE,CACzC,IAAI,CAAC,WAAW,CAAC,aAAa,EAAG,IAAsB,CAAC,GAAG,EAAE,CAAC,CAC/D,CAAC;QACF,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QACjD,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;KACtD;SAAM;QACL,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,IAAc,CAAC,CAAC;KACjD;IAED,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,cAAc,GAAG,CAAC,QAAkB,EAA2B,EAAE;IAC5E,OAAO,IAAI,KAAK,CAAC,QAAQ,CAAC,sBAAsB,EAAE,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;AAC5E,CAAC,CAAC\"}","dtsmap":{"name":"/Users/eric.rodriguez/personal/dev/recoil/packages/dom-jsx/node_modules/.cache/rollup-plugin-typescript2/placeholder/dom/lib/factory.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"factory.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../dom/lib/factory.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,WAAW,CAAC;AACrC,OAAO,EAAE,KAAK,EAAqC,MAAM,MAAM,CAAC;AAChE,OAAO,EAAE,KAAK,EAAE,MAAM,QAAQ,CAAC;AAG/B,aAAK,WAAW,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACnC,aAAK,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;AAC9C,aAAK,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC;AAK9B,eAAO,MAAM,aAAa,oFAEjB,KAAK,2DAwBb,CAAC;AAEF,eAAO,MAAM,cAAc,SAAU,YAAY,MAAM,CAAC,KAAG,MAAM,IAAI,CAcpE,CAAC;AAEF,eAAO,MAAM,cAAc,0BAAyB,MAAM,gBAAgB,CAEzE,CAAC\"}"},"dts":{"name":"/Users/eric.rodriguez/personal/dev/recoil/packages/dom-jsx/node_modules/.cache/rollup-plugin-typescript2/placeholder/dom/lib/factory.d.ts","writeByteOrderMark":false,"text":"import { WElement } from \"./element\";\r\nimport { IAtom } from \"atom\";\r\nimport { WNode } from \"./node\";\r\ndeclare type RawOrBinded<T> = IAtom<T> | T;\r\ndeclare type Props = Record<string, RawOrBinded<any>>;\r\ndeclare type Children = WNode<Node>[];\r\nexport declare const createElement: <K extends keyof HTMLElementTagNameMap>(tag: K | HTMLElementTagNameMap[K], props: Props, children: Children) => WElement<HTMLElementTagNameMap[K]>;\r\nexport declare const createTextNode: (text: RawOrBinded<string>) => WNode<Text>;\r\nexport declare const createFragment: (children: Children) => WNode<DocumentFragment>;\r\nexport {};\r\n//# sourceMappingURL=factory.d.ts.map"}}
